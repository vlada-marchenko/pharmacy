{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { NextRequest } from 'next/server';\n\nconst protectedRoutes = ['/shop', '/medicine', '/statistics'];\n\nconst authRoutes = ['/login', '/register'];\n\nexport function middleware(request: NextRequest) {\n  const token = request.cookies.get('token')?.value;\n  const shopId = request.cookies.get('shopId')?.value;\n  const { pathname } = request.nextUrl;\n  const isProtectedRoute = protectedRoutes.some((route) =>\n    pathname.startsWith(route),\n  );\n  if (isProtectedRoute && !token) {\n    return NextResponse.redirect(new URL('/login', request.url));\n  }\n\n  if (authRoutes.includes(pathname) && token) {\n    if (shopId) {\n    return NextResponse.redirect(new URL(`/shop/${shopId}`, request.url));\n  } else {\n    return NextResponse.redirect(new URL('/shop/create', request.url));\n  }\n  }\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: ['/shop/:path*', '/medicine/:path*', '/statistics/:path*', '/login', '/register'],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGA,MAAM,kBAAkB;IAAC;IAAS;IAAa;CAAc;AAE7D,MAAM,aAAa;IAAC;IAAU;CAAY;AAEnC,SAAS,WAAW,OAAoB;IAC7C,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU;IAC5C,MAAM,SAAS,QAAQ,OAAO,CAAC,GAAG,CAAC,WAAW;IAC9C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IACpC,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAC,QAC7C,SAAS,UAAU,CAAC;IAEtB,IAAI,oBAAoB,CAAC,OAAO;QAC9B,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;IAC5D;IAEA,IAAI,WAAW,QAAQ,CAAC,aAAa,OAAO;QAC1C,IAAI,QAAQ;YACZ,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,QAAQ,GAAG;QACrE,OAAO;YACL,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,gBAAgB,QAAQ,GAAG;QAClE;IACA;IACA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAgB;QAAoB;QAAsB;QAAU;KAAY;AAC5F"}}]
}