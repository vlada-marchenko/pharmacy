{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vvvvadya/Documents/GitHub/pharmacy/src/lib/api.ts"],"sourcesContent":["import axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst api = axios.create({\n    baseURL: process.env.NEXT_PUBLIC_API,\n    headers: {\n        \"Content-Type\": \"application/json\",\n    },\n});\n\napi.interceptors.request.use((config) => {\n    if (typeof window !== \"undefined\") {\n        const token = Cookies.get(\"token\");\n        if (token) {\n            config.headers.Authorization = `Bearer ${token}`;\n        }\n    }\n    return config\n})\n\nexport default api\n"],"names":[],"mappings":";;;;AAIa;AAJb;AACA;;;AAEA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACrB,OAAO;IACP,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC1B,wCAAmC;QAC/B,MAAM,QAAQ,mKAAO,CAAC,GAAG,CAAC;QAC1B,IAAI,OAAO;YACP,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QACpD;IACJ;IACA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/vvvvadya/Documents/GitHub/pharmacy/src/lib/auth.ts"],"sourcesContent":["import api from \"./api\";\n\nexport type RegisterRequest = {\n    name: string;\n    email: string;\n    phone: string;\n    password: string;\n}\n\nexport type LoginRequest = {\n    email: string;\n    password: string;\n}\n\nexport type User = {\n    _id: string,\n    name: string,\n    email: string,\n    phone: string,\n    createdAt: Date,\n    updatedAt: Date,\n    shopId: string\n}\n\nexport type LoginResponse = {\n    token: string;\n    user: User;\n}\n\n\nexport const register = async (data: RegisterRequest) => {\nconst res = await api.post<User>('/register', data)\nreturn res.data\n}\n\nexport const login = async (data: LoginRequest) => {\n    const res = await api.post<LoginResponse>('/login', data)\n    return res.data\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AA8BO,MAAM,WAAW,OAAO;IAC/B,MAAM,MAAM,MAAM,+HAAG,CAAC,IAAI,CAAO,aAAa;IAC9C,OAAO,IAAI,IAAI;AACf;AAEO,MAAM,QAAQ,OAAO;IACxB,MAAM,MAAM,MAAM,+HAAG,CAAC,IAAI,CAAgB,UAAU;IACpD,OAAO,IAAI,IAAI;AACnB"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/login/page.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"page-module__aydn6q__button\",\n  \"container\": \"page-module__aydn6q__container\",\n  \"field\": \"page-module__aydn6q__field\",\n  \"form\": \"page-module__aydn6q__form\",\n  \"image\": \"page-module__aydn6q__image\",\n  \"input\": \"page-module__aydn6q__input\",\n  \"label\": \"page-module__aydn6q__label\",\n  \"link\": \"page-module__aydn6q__link\",\n  \"span\": \"page-module__aydn6q__span\",\n  \"title\": \"page-module__aydn6q__title\",\n  \"titleCont\": \"page-module__aydn6q__titleCont\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///Users/vvvvadya/Documents/GitHub/pharmacy/src/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { LoginRequest } from '@/src/lib/auth';\nimport { useForm } from 'react-hook-form';\nimport { login } from '@/src/lib/auth';\nimport { toast } from 'react-toastify';\nimport Cookies from 'js-cookie';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport css from './page.module.css';\nimport Link from 'next/link';\n\nexport default function LoginPage() {\n  const {\n    register: formRegister,\n    handleSubmit,\n    formState: { errors, isSubmitting },\n  } = useForm<LoginRequest>();\n  const router = useRouter();\n\n  const onSubmit = async (data: LoginRequest) => {\n    try {\n      const res = await login(data);\n\n      Cookies.set('token', res.token, { expires: 1 });\n\n      if (res.user.shopId) {\n        Cookies.set('shopId', res.user.shopId, { expires: 1 });\n      }\n      localStorage.setItem('user', JSON.stringify(res.user));\n      toast.success(`Welcome back, ${res.user.name}`);\n      router.push('/shop');\n    } catch (err) {\n      toast.error('Login failed');\n      console.log(err);\n    }\n  };\n\n  return (\n    <div className={`container ${css.container}`}>\n      <div className={css.titleCont}>\n        <Image\n          className={css.image}\n          src=\"/pill.png\"\n          alt=\"pill\"\n          width={95}\n          height={95}\n        />\n        <h1 className={css.title}>\n          Your medication, <br /> delivered Say goodbye to all{' '}\n          <span className={css.span}>your healthcare</span> worries with us\n        </h1>\n      </div>\n      <form className={css.form} onSubmit={handleSubmit(onSubmit)}>\n        <div className={css.field}>\n          <input\n            className={css.input}\n            id=\"email\"\n            type=\"email\"\n            placeholder=\" \"\n            {...formRegister('email', { required: true })}\n          />\n          <label className={css.label} htmlFor=\"email\">\n            Email address\n          </label>\n        </div>\n        <div className={css.field}>\n          <input\n            className={css.input}\n            id=\"password\"\n            type=\"password\"\n            placeholder=\" \"\n            {...formRegister('password', { required: true })}\n          />\n          <label className={css.label} htmlFor=\"password\">\n            Password\n          </label>\n        </div>\n\n        <button className={css.button} type=\"submit\" disabled={isSubmitting}>\n          Log in\n        </button>\n      </form>\n      <Link className={css.link} href={'/register'}>\n        Don't have an account?\n      </Link>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;AAYe,SAAS;;IACtB,MAAM,EACJ,UAAU,YAAY,EACtB,YAAY,EACZ,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE,EACpC,GAAG,IAAA,4KAAO;IACX,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,WAAW,OAAO;QACtB,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,8HAAK,EAAC;YAExB,mKAAO,CAAC,GAAG,CAAC,SAAS,IAAI,KAAK,EAAE;gBAAE,SAAS;YAAE;YAE7C,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;gBACnB,mKAAO,CAAC,GAAG,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,EAAE;oBAAE,SAAS;gBAAE;YACtD;YACA,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,IAAI,IAAI;YACpD,+JAAK,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,IAAI,IAAI,CAAC,IAAI,EAAE;YAC9C,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,+JAAK,CAAC,KAAK,CAAC;YACZ,QAAQ,GAAG,CAAC;QACd;IACF;IAEA,qBACE,6LAAC;QAAI,WAAW,CAAC,UAAU,EAAE,qJAAG,CAAC,SAAS,EAAE;;0BAC1C,6LAAC;gBAAI,WAAW,qJAAG,CAAC,SAAS;;kCAC3B,6LAAC,2IAAK;wBACJ,WAAW,qJAAG,CAAC,KAAK;wBACpB,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;;;;;;kCAEV,6LAAC;wBAAG,WAAW,qJAAG,CAAC,KAAK;;4BAAE;0CACP,6LAAC;;;;;4BAAK;4BAA8B;0CACrD,6LAAC;gCAAK,WAAW,qJAAG,CAAC,IAAI;0CAAE;;;;;;4BAAsB;;;;;;;;;;;;;0BAGrD,6LAAC;gBAAK,WAAW,qJAAG,CAAC,IAAI;gBAAE,UAAU,aAAa;;kCAChD,6LAAC;wBAAI,WAAW,qJAAG,CAAC,KAAK;;0CACvB,6LAAC;gCACC,WAAW,qJAAG,CAAC,KAAK;gCACpB,IAAG;gCACH,MAAK;gCACL,aAAY;gCACX,GAAG,aAAa,SAAS;oCAAE,UAAU;gCAAK,EAAE;;;;;;0CAE/C,6LAAC;gCAAM,WAAW,qJAAG,CAAC,KAAK;gCAAE,SAAQ;0CAAQ;;;;;;;;;;;;kCAI/C,6LAAC;wBAAI,WAAW,qJAAG,CAAC,KAAK;;0CACvB,6LAAC;gCACC,WAAW,qJAAG,CAAC,KAAK;gCACpB,IAAG;gCACH,MAAK;gCACL,aAAY;gCACX,GAAG,aAAa,YAAY;oCAAE,UAAU;gCAAK,EAAE;;;;;;0CAElD,6LAAC;gCAAM,WAAW,qJAAG,CAAC,KAAK;gCAAE,SAAQ;0CAAW;;;;;;;;;;;;kCAKlD,6LAAC;wBAAO,WAAW,qJAAG,CAAC,MAAM;wBAAE,MAAK;wBAAS,UAAU;kCAAc;;;;;;;;;;;;0BAIvE,6LAAC,0KAAI;gBAAC,WAAW,qJAAG,CAAC,IAAI;gBAAE,MAAM;0BAAa;;;;;;;;;;;;AAKpD;GA5EwB;;QAKlB,4KAAO;QACI,kJAAS;;;KANF"}}]
}