{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vvvvadya/Documents/GitHub/pharmacy/src/lib/api.ts"],"sourcesContent":["import axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst api = axios.create({\n    baseURL: process.env.NEXT_PUBLIC_API,\n    headers: {\n        \"Content-Type\": \"application/json\",\n    },\n});\n\napi.interceptors.request.use((config) => {\n    if (typeof window !== \"undefined\") {\n        const token = Cookies.get(\"token\");\n        if (token) {\n            config.headers.Authorization = `Bearer ${token}`;\n        }\n    }\n    return config\n})\n\nexport default api\n"],"names":[],"mappings":";;;;AAIa;AAJb;AACA;;;AAEA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACrB,OAAO;IACP,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC1B,wCAAmC;QAC/B,MAAM,QAAQ,mKAAO,CAAC,GAAG,CAAC;QAC1B,IAAI,OAAO;YACP,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QACpD;IACJ;IACA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/vvvvadya/Documents/GitHub/pharmacy/src/lib/auth.ts"],"sourcesContent":["import api from \"./api\";\n\nexport type RegisterRequest = {\n    name: string;\n    email: string;\n    phone: string;\n    password: string;\n}\n\nexport type LoginRequest = {\n    email: string;\n    password: string;\n}\n\nexport type User = {\n    _id: string,\n    name: string,\n    email: string,\n    phone: string,\n    createdAt: Date,\n    updatedAt: Date,\n    shopId: string\n}\n\nexport type LoginResponse = {\n    token: string;\n    user: User;\n}\n\n\nexport const register = async (data: RegisterRequest) => {\nconst res = await api.post<User>('/register', data)\nreturn res.data\n}\n\nexport const login = async (data: LoginRequest) => {\n    const res = await api.post<LoginResponse>('/login', data)\n    return res.data\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AA8BO,MAAM,WAAW,OAAO;IAC/B,MAAM,MAAM,MAAM,+HAAG,CAAC,IAAI,CAAO,aAAa;IAC9C,OAAO,IAAI,IAAI;AACf;AAEO,MAAM,QAAQ,OAAO;IACxB,MAAM,MAAM,MAAM,+HAAG,CAAC,IAAI,CAAgB,UAAU;IACpD,OAAO,IAAI,IAAI;AACnB"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/vvvvadya/Documents/GitHub/pharmacy/src/app/login/page.tsx"],"sourcesContent":["'use client'\n\nimport { LoginRequest } from \"@/src/lib/auth\"\nimport { useForm } from \"react-hook-form\"\nimport { login } from \"@/src/lib/auth\"\nimport { toast } from \"react-toastify\"\nimport Cookies from \"js-cookie\"\nimport { useRouter } from \"next/navigation\"\nimport Image from 'next/image';\nimport css from './page.module.css';\nimport Link from 'next/link';\n\n\nexport default function LoginPage() {\n    const { register: formRegister, handleSubmit, formState: { errors, isSubmitting }} = useForm<LoginRequest>()\n    const router = useRouter()\n\n    const onSubmit = async (data: LoginRequest) => {\n        try {\n            const res = await login(data)\n\n            Cookies.set('token', res.token, {expires: 1})\n\n            if (res.user.shopId) {\n                Cookies.set('shopId', res.user.shopId, { expires: 1})\n            }\n            localStorage.setItem('user', JSON.stringify(res.user))\n            toast.success(`Welcome back, ${res.user.name}`)\n            router.push('/shop')\n        } catch (err) {\n            toast.error('Login failed')\n            console.log(err)\n        }\n        }\n        return (\n    <div className='container'>\n      <div className={css.titleCont}>\n        <Image className={css.image} src=\"/pill.png\" alt=\"pill\" width={95} height={95}/>\n        <h1 className={css.title}>\n          Your medication, <br /> delivered Say goodbye to all{' '}\n          <span className={css.span}>your healthcare</span> worries with us\n        </h1>\n      </div>\n      <form className={css.form} action=\"submit\">\n        <div className={css.field}>\n          <label className={css.label} htmlFor=\"name\">\n            User Name\n          </label>\n          <input className={css.input} key=\"name\" type=\"text\" />\n        </div>\n        <div className={css.field}>\n          <label className={css.label} htmlFor=\"email\">\n            Email address\n          </label>\n          <input className={css.input} key=\"email\" type=\"text\" />\n        </div>\n        <div className={css.field}>\n          <label className={css.label} htmlFor=\"phone\">\n            Phone number\n          </label>\n          <input className={css.input} key=\"phone\" type=\"text\" />\n        </div>\n        <div className={css.field}>\n          <label className={css.label} htmlFor=\"password\">\n            Password\n          </label>\n          <input className={css.input} key=\"password\" type=\"text\" />\n        </div>\n\n        <button className={css.button} type=\"submit\" onClick={handleSubmit(onSubmit)}>Register</button>\n      </form>\n      <Link className={css.link} href={'/login'}>\n       Already have an account?\n      </Link>\n    </div>\n  );\n    }\n\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;;;AAEA;;;AAVA;;;;;;;;;AAae,SAAS;;IACpB,MAAM,EAAE,UAAU,YAAY,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE,EAAC,GAAG,IAAA,4KAAO;IAC5F,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,WAAW,OAAO;QACpB,IAAI;YACA,MAAM,MAAM,MAAM,IAAA,8HAAK,EAAC;YAExB,mKAAO,CAAC,GAAG,CAAC,SAAS,IAAI,KAAK,EAAE;gBAAC,SAAS;YAAC;YAE3C,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;gBACjB,mKAAO,CAAC,GAAG,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,EAAE;oBAAE,SAAS;gBAAC;YACvD;YACA,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,IAAI,IAAI;YACpD,+JAAK,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,IAAI,IAAI,CAAC,IAAI,EAAE;YAC9C,OAAO,IAAI,CAAC;QAChB,EAAE,OAAO,KAAK;YACV,+JAAK,CAAC,KAAK,CAAC;YACZ,QAAQ,GAAG,CAAC;QAChB;IACA;IACA,qBACJ,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAW,IAAI,SAAS;;kCAC3B,6LAAC,2IAAK;wBAAC,WAAW,IAAI,KAAK;wBAAE,KAAI;wBAAY,KAAI;wBAAO,OAAO;wBAAI,QAAQ;;;;;;kCAC3E,6LAAC;wBAAG,WAAW,IAAI,KAAK;;4BAAE;0CACP,6LAAC;;;;;4BAAK;4BAA8B;0CACrD,6LAAC;gCAAK,WAAW,IAAI,IAAI;0CAAE;;;;;;4BAAsB;;;;;;;;;;;;;0BAGrD,6LAAC;gBAAK,WAAW,IAAI,IAAI;gBAAE,QAAO;;kCAChC,6LAAC;wBAAI,WAAW,IAAI,KAAK;;0CACvB,6LAAC;gCAAM,WAAW,IAAI,KAAK;gCAAE,SAAQ;0CAAO;;;;;;0CAG5C,6LAAC;gCAAM,WAAW,IAAI,KAAK;gCAAa,MAAK;+BAAZ;;;;;;;;;;;kCAEnC,6LAAC;wBAAI,WAAW,IAAI,KAAK;;0CACvB,6LAAC;gCAAM,WAAW,IAAI,KAAK;gCAAE,SAAQ;0CAAQ;;;;;;0CAG7C,6LAAC;gCAAM,WAAW,IAAI,KAAK;gCAAc,MAAK;+BAAb;;;;;;;;;;;kCAEnC,6LAAC;wBAAI,WAAW,IAAI,KAAK;;0CACvB,6LAAC;gCAAM,WAAW,IAAI,KAAK;gCAAE,SAAQ;0CAAQ;;;;;;0CAG7C,6LAAC;gCAAM,WAAW,IAAI,KAAK;gCAAc,MAAK;+BAAb;;;;;;;;;;;kCAEnC,6LAAC;wBAAI,WAAW,IAAI,KAAK;;0CACvB,6LAAC;gCAAM,WAAW,IAAI,KAAK;gCAAE,SAAQ;0CAAW;;;;;;0CAGhD,6LAAC;gCAAM,WAAW,IAAI,KAAK;gCAAiB,MAAK;+BAAhB;;;;;;;;;;;kCAGnC,6LAAC;wBAAO,WAAW,IAAI,MAAM;wBAAE,MAAK;wBAAS,SAAS,aAAa;kCAAW;;;;;;;;;;;;0BAEhF,6LAAC,0KAAI;gBAAC,WAAW,IAAI,IAAI;gBAAE,MAAM;0BAAU;;;;;;;;;;;;AAK7C;GA/DoB;;QACiE,4KAAO;QAC7E,kJAAS;;;KAFJ"}}]
}